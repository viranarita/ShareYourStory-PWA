/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={d:(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{addNewStory:()=>Jt,deleteStory:()=>Qt,fetchAllStories:()=>Yt,loginUser:()=>Rt,registerUser:()=>Ht});const e={parseActiveUrlWithCombiner:function(){var t=location.hash.slice(1).toLowerCase(),n=this._urlSplitter(t);return this._urlCombiner(n)},parseActiveUrlWithoutCombiner:function(){var t=location.hash.slice(1).toLowerCase();return this._urlSplitter(t)},_urlSplitter:function(t){var n=t.split("/");return{resource:n[1]||null,id:n[2]||null,verb:n[3]||null}},_urlCombiner:function(t){return(t.resource?"/".concat(t.resource):"/")+(t.id?"/:id":"")+(t.verb?"/".concat(t.verb):"")}},r=(t,n)=>n.some((n=>t instanceof n));let o,i;const a=new WeakMap,u=new WeakMap,c=new WeakMap;let s={get(t,n,e){if(t instanceof IDBTransaction){if("done"===n)return a.get(t);if("store"===n)return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return p(t[n])},set:(t,n,e)=>(t[n]=e,!0),has:(t,n)=>t instanceof IDBTransaction&&("done"===n||"store"===n)||n in t};function f(t){s=t(s)}function l(t){return"function"==typeof t?(n=t,(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...t){return n.apply(v(this),t),p(this.request)}:function(...t){return p(n.apply(v(this),t))}):(t instanceof IDBTransaction&&function(t){if(a.has(t))return;const n=new Promise(((n,e)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{n(),r()},i=()=>{e(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)}));a.set(t,n)}(t),r(t,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,s):t);var n}function p(t){if(t instanceof IDBRequest)return function(t){const n=new Promise(((n,e)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{n(p(t.result)),r()},i=()=>{e(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)}));return c.set(n,t),n}(t);if(u.has(t))return u.get(t);const n=l(t);return n!==t&&(u.set(t,n),c.set(n,t)),n}const v=t=>c.get(t),y=["get","getKey","getAll","getAllKeys","count"],d=["put","add","delete","clear"],h=new Map;function m(t,n){if(!(t instanceof IDBDatabase)||n in t||"string"!=typeof n)return;if(h.get(n))return h.get(n);const e=n.replace(/FromIndex$/,""),r=n!==e,o=d.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!y.includes(e))return;const i=async function(t,...n){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(n.shift())),(await Promise.all([a[e](...n),o&&i.done]))[0]};return h.set(n,i),i}f((t=>({...t,get:(n,e,r)=>m(n,e)||t.get(n,e,r),has:(n,e)=>!!m(n,e)||t.has(n,e)})));const b=["continue","continuePrimaryKey","advance"],w={},g=new WeakMap,k=new WeakMap,x={get(t,n){if(!b.includes(n))return t[n];let e=w[n];return e||(e=w[n]=function(...t){g.set(this,k.get(this)[n](...t))}),e}};async function*S(...t){let n=this;if(n instanceof IDBCursor||(n=await n.openCursor(...t)),!n)return;const e=new Proxy(n,x);for(k.set(e,n),c.set(e,v(n));n;)yield e,n=await(g.get(e)||n.continue()),g.delete(e)}function O(t,n){return n===Symbol.asyncIterator&&r(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===n&&r(t,[IDBIndex,IDBObjectStore])}function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function _(){var t=I(),n=t.m(_),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,P(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(_=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new C(t,n)},AsyncIterator:G,async:function(t,n,e,o,a){return(r(n)?N:E)(i(t),n,e,o,a)},keys:T,values:P}})()}function P(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(j(t)+" is not iterable")}function T(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function E(t,n,e,r,o){var i=N(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function N(t,n,e,r,o){return new G(I().w(t,n,e,r),o||Promise)}function G(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof C?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(F(G.prototype),F(G.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),F(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function I(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return F(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(F(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,F(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,F(l,"constructor",s),F(s,"constructor",c),c.displayName="GeneratorFunction",F(s,o,"GeneratorFunction"),F(l),F(l,o,"Generator"),F(l,r,(function(){return this})),F(l,"toString",(function(){return"[object Generator]"})),(I=function(){return{w:i,m:p}})()}function F(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}F=function(t,n,e,r){function i(n,e){F(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},F(t,n,e,r)}function C(t,n){this.v=t,this.k=n}function A(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function D(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){A(i,r,o,a,u,"next",t)}function u(t){A(i,r,o,a,u,"throw",t)}a(void 0)}))}}f((t=>({...t,get:(n,e,r)=>O(n,e)?S:t.get(n,e,r),has:(n,e)=>O(n,e)||t.has(n,e)})));var q="favorites",M="outbox",B=function(t,n,{blocked:e,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,n),u=p(a);return r&&a.addEventListener("upgradeneeded",(t=>{r(p(a.result),t.oldVersion,t.newVersion,p(a.transaction),t)})),e&&a.addEventListener("blocked",(t=>e(t.oldVersion,t.newVersion,t))),u.then((t=>{i&&t.addEventListener("close",(()=>i())),o&&t.addEventListener("versionchange",(t=>o(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),u}("berbagi-cerita-db",2,{upgrade:function(t,n){n<1&&t.createObjectStore(q,{keyPath:"id"}),n<2&&t.createObjectStore(M,{keyPath:"id",autoIncrement:!0})}});const W=function(t){return D(_().mark((function n(){return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B;case 2:return n.abrupt("return",n.sent.put(q,t));case 3:case"end":return n.stop()}}),n)})))()},z=function(){return D(_().mark((function t(){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B;case 2:return t.abrupt("return",t.sent.getAll(q));case 3:case"end":return t.stop()}}),t)})))()},H=function(t){return D(_().mark((function n(){return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B;case 2:return n.abrupt("return",n.sent.delete(q,t));case 3:case"end":return n.stop()}}),n)})))()},U=function(t){return D(_().mark((function n(){return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B;case 2:return n.abrupt("return",n.sent.add(M,t));case 3:case"end":return n.stop()}}),n)})))()},R=function(){return D(_().mark((function t(){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B;case 2:return t.abrupt("return",t.sent.getAll(M));case 3:case"end":return t.stop()}}),t)})))()},V=function(t){return D(_().mark((function n(){return _().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B;case 2:return n.abrupt("return",n.sent.delete(M,t));case 3:case"end":return n.stop()}}),n)})))()};function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function K(){var t=tt(),n=t.m(K),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,J(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(K=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new et(t,n)},AsyncIterator:Z,async:function(t,n,e,o,a){return(r(n)?X:Q)(i(t),n,e,o,a)},keys:$,values:J}})()}function J(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Y(t)+" is not iterable")}function $(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Q(t,n,e,r,o){var i=X(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function X(t,n,e,r,o){return new Z(tt().w(t,n,e,r),o||Promise)}function Z(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof et?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(nt(Z.prototype),nt(Z.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),nt(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function tt(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return nt(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(nt(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,nt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,nt(l,"constructor",s),nt(s,"constructor",c),c.displayName="GeneratorFunction",nt(s,o,"GeneratorFunction"),nt(l),nt(l,o,"Generator"),nt(l,r,(function(){return this})),nt(l,"toString",(function(){return"[object Generator]"})),(tt=function(){return{w:i,m:p}})()}function nt(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}nt=function(t,n,e,r){function i(n,e){nt(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},nt(t,n,e,r)}function et(t,n){this.v=t,this.k=n}function rt(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ot(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){rt(i,r,o,a,u,"next",t)}function u(t){rt(i,r,o,a,u,"throw",t)}a(void 0)}))}}function it(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,at(r.key),r)}}function at(t){var n=function(t){if("object"!=Y(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Y(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Y(n)?n:n+""}function ut(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}function ct(t,n){return t.get(ft(t,n))}function st(t,n,e){return t.set(ft(t,n),e),e}function ft(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var lt=new WeakMap,pt=new WeakMap;const vt=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),ut(this,lt,null),ut(this,pt,{})},n=[{key:"render",value:(e=ot(K().mark((function t(){return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section id="home-page-content"></section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"initializeMap",value:function(){var t=document.querySelector("#map");t&&(t.style.display="block"),st(lt,this,L.map("map").setView([-2.5489,118.0149],5));var n=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),e={Street:n,Satellite:L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri"})};L.control.layers(e).addTo(ct(lt,this)),n.addTo(ct(lt,this))}},{key:"displayGuestMessage",value:function(t){document.querySelector("#home-page-content").innerHTML='\n      <div class="guest-view-prompt-fullwidth text-center">\n          <h1>üëã Selamat Datang!</h1>\n          <p>'.concat(t,'</p>\n          <a href="#/login" class="login-prompt-button">Login Sekarang</a>\n      </div>\n    ')}},{key:"displayStories",value:function(t){var n=this,e=document.querySelector("#home-page-content");e.innerHTML='\n      <div class="container">\n        <h1>Jelajahi Cerita Pengguna</h1>\n        <div id="map"></div>\n\n        <h2>Daftar Cerita</h2>\n        <div id="story-list" class="story-list"></div>\n      </div>\n    ',this.initializeMap();var r=e.querySelector("#story-list");Object.values(ct(pt,this)).forEach((function(t){return ct(lt,n).removeLayer(t)})),st(pt,this,{}),0!==t.length?t.forEach((function(t){var e=n._createStoryElement(t);if(r.appendChild(e),t.lat&&t.lon){var o=L.marker([t.lat,t.lon]).addTo(ct(lt,n)).bindPopup('\n            <img src="'.concat(t.photoUrl,'" alt="Gambar cerita oleh ').concat(t.name,'" class="popup-image">\n            <b>').concat(t.name,"</b>\n            <br>\n            <small>").concat(n._formatDate(t.createdAt),'</small> \n            <hr style="margin: 4px 0;"> \n            ').concat(t.description.substring(0,30),"...\n          "));ct(pt,n)[t.id]=o,e.addEventListener("mouseenter",(function(){return o.openPopup()})),e.addEventListener("mouseleave",(function(){return o.closePopup()}))}})):r.innerHTML='<p class="stories-empty">Tidak ada cerita untuk ditampilkan.</p>'}},{key:"displayError",value:function(t){document.querySelector("#home-page-content").innerHTML='<div class="container"><p class="stories-empty">‚ùå Gagal memuat data: '.concat(t,"</p></div>")}},{key:"_createStoryElement",value:function(t){var n=document.createElement("article");n.classList.add("story-item"),n.id="story-".concat(t.id),n.innerHTML='\n      <img class="story-item__image" src="'.concat(t.photoUrl,'" alt="Gambar cerita oleh ').concat(t.name,'">\n      <div class="story-item__content">\n        <div class="story-item__header">\n          <h3 class="story-item__name">').concat(t.name,'</h3>\n          <p class="story-item__date">').concat(this._formatDate(t.createdAt),'</p> \n        </div>\n        <p class="story-item__description">').concat(t.description,'</p>\n        \n        <button \n          class="favorite-button" \n          aria-label="Tambahkan ke favorit" \n          data-story-id="').concat(t.id,'">\n          ‚ù§Ô∏è\n        </button>\n      </div>\n    ');var e=n.querySelector(".favorite-button");return e.addEventListener("click",function(){var n=ot(K().mark((function n(r){return K().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.stopPropagation(),n.next=3,W(t);case 3:alert("Cerita ditambahkan ke favorit!"),e.disabled=!0,e.innerText="‚úÖ";case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()),n}},{key:"_formatDate",value:function(t){return new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}}],n&&it(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e}();function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function dt(){var t=kt(),n=t.m(dt),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,ht(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(dt=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new St(t,n)},AsyncIterator:gt,async:function(t,n,e,o,a){return(r(n)?wt:bt)(i(t),n,e,o,a)},keys:mt,values:ht}})()}function ht(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(yt(t)+" is not iterable")}function mt(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function bt(t,n,e,r,o){var i=wt(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function wt(t,n,e,r,o){return new gt(kt().w(t,n,e,r),o||Promise)}function gt(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof St?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(xt(gt.prototype),xt(gt.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),xt(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function kt(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return xt(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(xt(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,xt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,xt(l,"constructor",s),xt(s,"constructor",c),c.displayName="GeneratorFunction",xt(s,o,"GeneratorFunction"),xt(l),xt(l,o,"Generator"),xt(l,r,(function(){return this})),xt(l,"toString",(function(){return"[object Generator]"})),(kt=function(){return{w:i,m:p}})()}function xt(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}xt=function(t,n,e,r){function i(n,e){xt(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},xt(t,n,e,r)}function St(t,n){this.v=t,this.k=n}function Ot(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function jt(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Ot(i,r,o,a,u,"next",t)}function u(t){Ot(i,r,o,a,u,"throw",t)}a(void 0)}))}}function _t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pt(r.key),r)}}function Pt(t){var n=function(t){if("object"!=yt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=yt(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yt(n)?n:n+""}var Tt=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=jt(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container about-page">\n        <h1>Tentang Proyek Ini</h1>\n        <p>\n          Selamat datang di platform Berbagi Cerita kami! Ini adalah tempat di mana Anda dapat membagikan momen berkesan dan menemukan cerita dari orang lain, yang semuanya ditandai pada lokasinya di peta dunia yang interaktif.\n        </p>\n        \n        <h2>Fitur Utama Kami</h2>\n        <div class="features-grid">\n          <div class="feature-card">\n            <span class="feature-emoji">üó∫Ô∏è</span>\n            <h4><strong>Peta Interaktif</strong></h4>\n            <p>Jelajahi cerita secara visual. Arahkan kursor ke sebuah cerita dalam daftar untuk melihat lokasinya disorot di peta!</p>\n          </div>\n          <div class="feature-card">\n            <span class="feature-emoji">‚ûï</span>\n            <h4><strong>Bagikan Momen Anda</strong></h4>\n            <p>Tambahkan cerita Anda sendiri dengan mudah, lengkap dengan deskripsi, foto, dan cukup dengan mengklik lokasi di peta.</p>\n          </div>\n          <div class="feature-card">\n            <span class="feature-emoji">üìπ</span>\n            <h4><strong>Ambil Gambar Langsung dari Kamera</strong></h4>\n            <p>Belum punya foto? Anda bisa mengabadikan momen secara langsung dari kamera perangkat Anda.</p>\n          </div>\n          <div class="feature-card">\n            <span class="feature-emoji">üì±</span>\n            <h4><strong>Modern & Aksesibel</strong></h4>\n            <p>Nikmati pengalaman yang lancar di perangkat apa pun, berkat desain yang responsif dan teknologi web modern.</p>\n          </div>\n        </div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=jt(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],n&&_t(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();const Et="https://story-api.dicoding.dev/v1";function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Nt(){var t=Dt(),n=t.m(Nt),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Gt(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Nt=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Mt(t,n)},AsyncIterator:At,async:function(t,n,e,o,a){return(r(n)?Ct:Ft)(i(t),n,e,o,a)},keys:It,values:Gt}})()}function Gt(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Lt(t)+" is not iterable")}function It(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ft(t,n,e,r,o){var i=Ct(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Ct(t,n,e,r,o){return new At(Dt().w(t,n,e,r),o||Promise)}function At(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Mt?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(qt(At.prototype),qt(At.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),qt(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Dt(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return qt(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(qt(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,qt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,qt(l,"constructor",s),qt(s,"constructor",c),c.displayName="GeneratorFunction",qt(s,o,"GeneratorFunction"),qt(l),qt(l,o,"Generator"),qt(l,r,(function(){return this})),qt(l,"toString",(function(){return"[object Generator]"})),(Dt=function(){return{w:i,m:p}})()}function qt(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}qt=function(t,n,e,r){function i(n,e){qt(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},qt(t,n,e,r)}function Mt(t,n){this.v=t,this.k=n}function Bt(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Wt(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Bt(i,r,o,a,u,"next",t)}function u(t){Bt(i,r,o,a,u,"throw",t)}a(void 0)}))}}var zt=function(){return localStorage.getItem("authToken")};function Ht(t){return Ut.apply(this,arguments)}function Ut(){return(Ut=Wt(Nt().mark((function t(n){var e,r,o,i,a;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.name,r=n.email,o=n.password,t.next=3,fetch("".concat(Et,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:r,password:o})});case 3:return i=t.sent,t.next=6,i.json();case 6:if(!(a=t.sent).error){t.next=9;break}throw new Error(a.message);case 9:return t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Rt(t){return Vt.apply(this,arguments)}function Vt(){return(Vt=Wt(Nt().mark((function t(n){var e,r,o,i;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.email,r=n.password,t.next=3,fetch("".concat(Et,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});case 3:return o=t.sent,t.next=6,o.json();case 6:if(!(i=t.sent).error){t.next=9;break}throw new Error(i.message);case 9:return t.abrupt("return",i.loginResult);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Yt(){return Kt.apply(this,arguments)}function Kt(){return(Kt=Wt(Nt().mark((function t(){var n,e;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(Et,"/stories"),{headers:{Authorization:"Bearer ".concat(zt())}});case 2:return n=t.sent,t.next=5,n.json();case 5:if(!(e=t.sent).error){t.next=8;break}throw new Error(e.message);case 8:return t.abrupt("return",e.listStory);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Jt(t){return $t.apply(this,arguments)}function $t(){return($t=Wt(Nt().mark((function t(n){var e,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(Et,"/stories"),{method:"POST",headers:{Authorization:"Bearer ".concat(zt())},body:n});case 2:return e=t.sent,t.next=5,e.json();case 5:if(!(r=t.sent).error){t.next=8;break}throw new Error(r.message);case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qt(t){return Xt.apply(this,arguments)}function Xt(){return(Xt=Wt(Nt().mark((function t(n){var e,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(Et,"/stories/").concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(authToken)}});case 3:if((e=t.sent).ok){t.next=6;break}throw new Error("HTTP error! status: ".concat(e.status));case 6:return t.next=8,e.json();case 8:if(!(r=t.sent).error){t.next=11;break}throw new Error(r.message);case 11:return t.abrupt("return",r);case 14:return t.prev=14,t.t0=t.catch(0),console.error("Gagal menghapus cerita:",t.t0),t.abrupt("return",{error:!0,message:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function tn(){var t=un(),n=t.m(tn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,nn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(tn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new sn(t,n)},AsyncIterator:an,async:function(t,n,e,o,a){return(r(n)?on:rn)(i(t),n,e,o,a)},keys:en,values:nn}})()}function nn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Zt(t)+" is not iterable")}function en(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function rn(t,n,e,r,o){var i=on(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function on(t,n,e,r,o){return new an(un().w(t,n,e,r),o||Promise)}function an(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof sn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(cn(an.prototype),cn(an.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),cn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function un(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return cn(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(cn(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,cn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,cn(l,"constructor",s),cn(s,"constructor",c),c.displayName="GeneratorFunction",cn(s,o,"GeneratorFunction"),cn(l),cn(l,o,"Generator"),cn(l,r,(function(){return this})),cn(l,"toString",(function(){return"[object Generator]"})),(un=function(){return{w:i,m:p}})()}function cn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}cn=function(t,n,e,r){function i(n,e){cn(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},cn(t,n,e,r)}function sn(t,n){this.v=t,this.k=n}function fn(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ln(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){fn(i,r,o,a,u,"next",t)}function u(t){fn(i,r,o,a,u,"throw",t)}a(void 0)}))}}function pn(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vn(r.key),r)}}function vn(t){var n=function(t){if("object"!=Zt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Zt(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zt(n)?n:n+""}function yn(t,n){return t.get(hn(t,n))}function dn(t,n,e){return t.set(hn(t,n),e),e}function hn(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var mn=new WeakMap,bn=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}(this,mn,null)},n=[{key:"render",value:(o=ln(tn().mark((function t(){return tn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container">\n        <h1>Tambah Cerita Baru</h1>\n        <form id="add-story-form" class="add-story-form" novalidate>\n          \n          <div class="form-group">\n            <label for="story-description">Deskripsi:</label>\n            <textarea id="story-description" name="description" rows="4" required></textarea>\n          </div>\n          \n          <div class="form-group">\n            <label for="story-photo">Gambar:</label>\n            <input type="file" id="story-photo" name="photo" accept="image/*" required>\n            <button type="button" id="camera-button" class="camera-button">Ambil dari Kamera</button>\n          </div>\n\n          <div id="camera-container" class="camera-container" style="display: none;">\n            <video id="camera-preview" autoplay></video>\n            <button type="button" id="capture-button" class="capture-button" aria-label="Ambil Foto"></button>\n            <button type="button" id="close-camera-button" class="close-camera-button" aria-label="Tutup Kamera">X</button>\n          </div>\n          <canvas id="photo-canvas" style="display: none;"></canvas>\n\n          <div class="form-group">\n            <label for="map-add">Pilih Lokasi di Peta:</label>\n            <div id="map-add"></div>\n            <label for="latitude" class="visually-hidden">Latitude</label>\n            <input type="hidden" id="latitude" name="lat">\n            <label for="longitude" class="visually-hidden">Longitude</label>\n            <input type="hidden" id="longitude" name="lon">\n          </div>\n          <button type="submit" id="submit-button" class="submit-button">Bagikan Cerita</button>\n        </form>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(r=ln(tn().mark((function t(){return tn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._initializeMap(),this._initializeFormSubmit(),this._initializeCamera();case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"_initializeMap",value:function(){var t=L.map("map-add").setView([-2.5489,118.0149],5);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t);var n,e=document.querySelector("#latitude"),r=document.querySelector("#longitude");t.on("click",(function(o){var i=o.latlng,a=i.lat,u=i.lng;e.value=a,r.value=u,n&&t.removeLayer(n),n=L.marker([a,u]).addTo(t)}))}},{key:"_initializeFormSubmit",value:function(){var t=this,n=document.querySelector("#add-story-form"),e=document.querySelector("#submit-button");n.addEventListener("submit",function(){var r=ln(tn().mark((function r(o){var i,a,u,c,s,f,l;return tn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.preventDefault(),i=document.querySelector("#story-description").value,a=document.querySelector("#story-photo").files[0],u=document.querySelector("#latitude").value,c=document.querySelector("#longitude").value,i&&a){r.next=8;break}return t._showFeedback("Deskripsi dan gambar harus diisi.","error"),r.abrupt("return");case 8:return e.disabled=!0,e.innerText="Mengirim...",(s=new FormData).append("description",i),s.append("photo",a),u&&c&&(s.append("lat",u),s.append("lon",c)),r.prev=14,t._showFeedback("Mencoba mengirim cerita...","info"),r.next=18,Jt(s);case 18:if(!(f=r.sent).error){r.next=21;break}throw new Error(f.message);case 21:t._showFeedback("Cerita berhasil ditambahkan! (Online)","success"),setTimeout((function(){window.location.hash="#/"}),2e3),r.next=34;break;case 25:return r.prev=25,r.t0=r.catch(14),console.error("Gagal mengirim ke API, menyimpan ke Outbox:",r.t0.message),t._showFeedback("Gagal mengirim. Cerita disimpan di Outbox.","info"),l={description:i,photo:a,lat:u,lon:c},r.next=32,U(l);case 32:t._showFeedback("Cerita akan dikirim otomatis saat kembali online.","success"),n.reset();case 34:e.disabled=!1,e.innerText="Bagikan Cerita";case 36:case"end":return r.stop()}}),r,null,[[14,25]])})));return function(t){return r.apply(this,arguments)}}())}},{key:"_initializeCamera",value:function(){var t=this,n=document.querySelector("#camera-button"),e=document.querySelector("#capture-button"),r=document.querySelector("#close-camera-button");n.addEventListener("click",(function(){return t._openCamera()})),e.addEventListener("click",(function(){return t._capturePhoto()})),r.addEventListener("click",(function(){return t._closeCamera()}))}},{key:"_openCamera",value:(e=ln(tn().mark((function t(){var n,e;return tn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.querySelector("#camera-container"),e=document.querySelector("#camera-preview"),n.style.display="block",t.prev=3,t.t0=dn,t.t1=mn,t.t2=this,t.next=9,navigator.mediaDevices.getUserMedia({video:!0});case 9:t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),e.srcObject=yn(mn,this),t.next=19;break;case 14:t.prev=14,t.t4=t.catch(3),console.error("Error mengakses kamera:",t.t4),this._showFeedback("Tidak bisa mengakses kamera. Pastikan Anda memberikan izin.","error"),n.style.display="none";case 19:case"end":return t.stop()}}),t,this,[[3,14]])}))),function(){return e.apply(this,arguments)})},{key:"_capturePhoto",value:function(){var t=this,n=document.querySelector("#photo-canvas"),e=document.querySelector("#camera-preview"),r=document.querySelector("#story-photo");n.width=e.videoWidth,n.height=e.videoHeight,n.getContext("2d").drawImage(e,0,0,n.width,n.height),n.toBlob((function(n){var e=new File([n],"camera-photo.jpg",{type:"image/jpeg"}),o=new DataTransfer;o.items.add(e),r.files=o.files,t._showFeedback("Foto berhasil diambil dari kamera!","success"),t._closeCamera()}),"image/jpeg")}},{key:"_closeCamera",value:function(){document.querySelector("#camera-container").style.display="none",yn(mn,this)&&(yn(mn,this).getTracks().forEach((function(t){return t.stop()})),dn(mn,this,null))}},{key:"_showFeedback",value:function(t,n){var e=document.createElement("div");e.className="toast-notification toast--".concat(n),e.innerText=t,document.body.appendChild(e),setTimeout((function(){e.classList.add("toast--show")}),10),setTimeout((function(){e.classList.remove("toast--show"),e.addEventListener("transitionend",(function(){e.remove()}))}),3e3)}}],n&&pn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r,o}();function wn(t){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wn(t)}function gn(){var t=_n(),n=t.m(gn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,kn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(gn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Tn(t,n)},AsyncIterator:jn,async:function(t,n,e,o,a){return(r(n)?On:Sn)(i(t),n,e,o,a)},keys:xn,values:kn}})()}function kn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(wn(t)+" is not iterable")}function xn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Sn(t,n,e,r,o){var i=On(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function On(t,n,e,r,o){return new jn(_n().w(t,n,e,r),o||Promise)}function jn(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Tn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Pn(jn.prototype),Pn(jn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Pn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function _n(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Pn(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Pn(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Pn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Pn(l,"constructor",s),Pn(s,"constructor",c),c.displayName="GeneratorFunction",Pn(s,o,"GeneratorFunction"),Pn(l),Pn(l,o,"Generator"),Pn(l,r,(function(){return this})),Pn(l,"toString",(function(){return"[object Generator]"})),(_n=function(){return{w:i,m:p}})()}function Pn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Pn=function(t,n,e,r){function i(n,e){Pn(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Pn(t,n,e,r)}function Tn(t,n){this.v=t,this.k=n}function En(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Ln(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){En(i,r,o,a,u,"next",t)}function u(t){En(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Nn(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gn(r.key),r)}}function Gn(t){var n=function(t){if("object"!=wn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=wn(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wn(n)?n:n+""}var In=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=Ln(gn().mark((function t(){return gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container form-page-container">\n        <h1>Login</h1>\n        <form id="login-form" class="login-form" novalidate>\n          <div class="form-group">\n            <label for="email">Email</label>\n            <input type="email" id="email" required>\n          </div>\n          <div class="form-group">\n            <label for="password">Password</label>\n            <input type="password" id="password" required>\n          </div>\n          <button type="submit" class="submit-button">Login</button>\n          <p class="auth-switch">Belum punya akun? <a href="#/register">Register di sini</a></p>\n        </form>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=Ln(gn().mark((function t(){var n=this;return gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.querySelector("#login-form").addEventListener("submit",function(){var t=Ln(gn().mark((function t(e){var r,o,i;return gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r=document.querySelector("#email").value,o=document.querySelector("#password").value,t.prev=3,t.next=6,Rt({email:r,password:o});case 6:i=t.sent,localStorage.setItem("authToken",i.token),localStorage.setItem("userName",i.name),window.location.hash="#/",window.location.reload(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),n._showFeedback(t.t0.message,"error");case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(n){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"_showFeedback",value:function(t,n){var e=document.createElement("div");e.className="toast-notification toast--".concat(n),e.innerText=t,document.body.appendChild(e),setTimeout((function(){e.classList.add("toast--show")}),10),setTimeout((function(){e.classList.remove("toast--show"),e.addEventListener("transitionend",(function(){e.remove()}))}),3e3)}}],n&&Nn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function Fn(t){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fn(t)}function Cn(){var t=Wn(),n=t.m(Cn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,An(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Cn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Hn(t,n)},AsyncIterator:Bn,async:function(t,n,e,o,a){return(r(n)?Mn:qn)(i(t),n,e,o,a)},keys:Dn,values:An}})()}function An(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Fn(t)+" is not iterable")}function Dn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function qn(t,n,e,r,o){var i=Mn(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Mn(t,n,e,r,o){return new Bn(Wn().w(t,n,e,r),o||Promise)}function Bn(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Hn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(zn(Bn.prototype),zn(Bn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),zn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Wn(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return zn(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(zn(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,zn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,zn(l,"constructor",s),zn(s,"constructor",c),c.displayName="GeneratorFunction",zn(s,o,"GeneratorFunction"),zn(l),zn(l,o,"Generator"),zn(l,r,(function(){return this})),zn(l,"toString",(function(){return"[object Generator]"})),(Wn=function(){return{w:i,m:p}})()}function zn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}zn=function(t,n,e,r){function i(n,e){zn(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},zn(t,n,e,r)}function Hn(t,n){this.v=t,this.k=n}function Un(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Rn(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Un(i,r,o,a,u,"next",t)}function u(t){Un(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Vn(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yn(r.key),r)}}function Yn(t){var n=function(t){if("object"!=Fn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Fn(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fn(n)?n:n+""}var Kn=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=Rn(Cn().mark((function t(){return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container form-page-container">\n        <h1>Register</h1>\n        <form id="register-form" class="register-form" novalidate>\n          \n          <div class="form-group">\n            <label for="name">Nama</label>\n            <input type="text" id="name" required>\n          </div>\n          <div class="form-group">\n            <label for="email">Email</label>\n            <input type="email" id="email" required>\n          </div>\n          <div class="form-group">\n            <label for="password">Password</label>\n            <input type="password" id="password" minlength="8" required>\n          </div>\n          <button type="submit" class="submit-button">Register</button>\n          <p class="auth-switch">Sudah punya akun? <a href="#/login">Login di sini</a></p>\n        </form>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=Rn(Cn().mark((function t(){var n=this;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.querySelector("#register-form").addEventListener("submit",function(){var t=Rn(Cn().mark((function t(e){var r,o,i;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),r=document.querySelector("#name").value,o=document.querySelector("#email").value,!((i=document.querySelector("#password").value).length<8)){t.next=7;break}return n._showFeedback("Password minimal harus 8 karakter.","error"),t.abrupt("return");case 7:return t.prev=7,t.next=10,Ht({name:r,email:o,password:i});case 10:n._showFeedback("Registrasi berhasil! Mengarahkan ke halaman login...","success"),setTimeout((function(){window.location.hash="#/login"}),2e3),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(7),n._showFeedback(t.t0.message,"error");case 17:case"end":return t.stop()}}),t,null,[[7,14]])})));return function(n){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"_showFeedback",value:function(t,n){var e=document.createElement("div");e.className="toast-notification toast--".concat(n),e.innerText=t,document.body.appendChild(e),setTimeout((function(){e.classList.add("toast--show")}),10),setTimeout((function(){e.classList.remove("toast--show"),e.addEventListener("transitionend",(function(){e.remove()}))}),3e3)}}],n&&Vn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}(),Jn="authToken",$n="userName";const Qn=function(){return!!localStorage.getItem(Jn)},Xn=function(){return localStorage.getItem($n)},Zn=function(){localStorage.removeItem(Jn),localStorage.removeItem($n)},te=function(){return localStorage.getItem(Jn)};function ne(t){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(t)}function ee(){var t=ce(),n=t.m(ee),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,re(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(ee=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new fe(t,n)},AsyncIterator:ue,async:function(t,n,e,o,a){return(r(n)?ae:ie)(i(t),n,e,o,a)},keys:oe,values:re}})()}function re(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(ne(t)+" is not iterable")}function oe(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ie(t,n,e,r,o){var i=ae(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function ae(t,n,e,r,o){return new ue(ce().w(t,n,e,r),o||Promise)}function ue(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof fe?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(se(ue.prototype),se(ue.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),se(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function ce(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return se(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(se(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,se(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,se(l,"constructor",s),se(s,"constructor",c),c.displayName="GeneratorFunction",se(s,o,"GeneratorFunction"),se(l),se(l,o,"Generator"),se(l,r,(function(){return this})),se(l,"toString",(function(){return"[object Generator]"})),(ce=function(){return{w:i,m:p}})()}function se(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}se=function(t,n,e,r){function i(n,e){se(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},se(t,n,e,r)}function fe(t,n){this.v=t,this.k=n}function le(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function pe(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){le(i,r,o,a,u,"next",t)}function u(t){le(i,r,o,a,u,"throw",t)}a(void 0)}))}}function ve(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ye(r.key),r)}}function ye(t){var n=function(t){if("object"!=ne(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=ne(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ne(n)?n:n+""}function de(t,n){return t.get(me(t,n))}function he(t,n,e){return t.set(me(t,n),e),e}function me(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var be=new WeakMap;const we={"/":vt,"/home":vt,"/about":Tt,"/add":bn,"/login":In,"/register":Kn,"/favorite":function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}(this,be,[])},n=[{key:"render",value:(r=pe(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container">\n        <h1>Cerita Favorit Anda</h1>\n        \n        <div class="search-container form-group">\n          <label for="search-favorite">Cari Cerita Favorit</label>\n          <input id="search-favorite" type="search" placeholder="Ketik nama atau deskripsi...">\n        </div>\n        \n        <div id="story-list" class="story-list"></div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=pe(ee().mark((function t(){var n=this;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Qn()){t.next=4;break}return document.querySelector("#story-list").innerHTML='\n        <div class="guest-view-prompt-fullwidth text-center">\n            <h2>Login Dibutuhkan</h2>\n            <p>Silakan login untuk melihat daftar favorit Anda.</p>\n            <a href="#/login" class="login-prompt-button">Login Sekarang</a>\n        </div>\n      ',t.abrupt("return");case 4:return t.t0=he,t.t1=be,t.t2=this,t.next=9,z();case 9:t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),this._displayStories(de(be,this)),document.querySelector("#search-favorite").addEventListener("input",(function(t){var e=t.target.value.toLowerCase();n._performSearch(e)}));case 14:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_performSearch",value:function(t){var n=de(be,this);t&&(n=de(be,this).filter((function(n){return n.name.toLowerCase().includes(t)||n.description.toLowerCase().includes(t)}))),this._displayStories(n)}},{key:"_displayStories",value:function(t){var n=this,e=document.querySelector("#story-list");e.innerHTML="",0!==t.length?t.forEach((function(t){var r=n._createStoryElement(t);e.appendChild(r)})):e.innerHTML='<p class="stories-empty">Anda belum memiliki cerita favorit atau tidak ada hasil pencarian.</p>'}},{key:"_createStoryElement",value:function(t){var n=this,e=document.createElement("article");return e.classList.add("story-item"),e.id="story-".concat(t.id),e.innerHTML='\n      <img class="story-item__image" src="'.concat(t.photoUrl,'" alt="Gambar cerita oleh ').concat(t.name,'">\n      <div class="story-item__content">\n        <div class="story-item__header">\n          <h3 class="story-item__name">').concat(t.name,'</h3>\n          <p class="story-item__date">').concat(this._formatDate(t.createdAt),'</p> \n        </div>\n        <p class="story-item__description">').concat(t.description,'</p>\n        \n        <button \n          class="delete-button" \n          aria-label="Hapus dari favorit" \n          data-story-id="').concat(t.id,'">\n          Hapus\n        </button>\n      </div>\n    '),e.querySelector(".delete-button").addEventListener("click",function(){var e=pe(ee().mark((function e(r){var o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.stopPropagation(),e.next=3,H(t.id);case 3:he(be,n,de(be,n).filter((function(n){return n.id!==t.id}))),o=document.querySelector("#search-favorite").value.toLowerCase(),n._performSearch(o),alert("Cerita dihapus dari favorit!");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e}},{key:"_formatDate",value:function(t){return new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}}],n&&ve(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}()};function ge(t){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(t)}function ke(){var t=Pe(),n=t.m(ke),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,xe(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(ke=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Ee(t,n)},AsyncIterator:_e,async:function(t,n,e,o,a){return(r(n)?je:Oe)(i(t),n,e,o,a)},keys:Se,values:xe}})()}function xe(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(ge(t)+" is not iterable")}function Se(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Oe(t,n,e,r,o){var i=je(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function je(t,n,e,r,o){return new _e(Pe().w(t,n,e,r),o||Promise)}function _e(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Ee?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Te(_e.prototype),Te(_e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Te(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Pe(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Te(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Te(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Te(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Te(l,"constructor",s),Te(s,"constructor",c),c.displayName="GeneratorFunction",Te(s,o,"GeneratorFunction"),Te(l),Te(l,o,"Generator"),Te(l,r,(function(){return this})),Te(l,"toString",(function(){return"[object Generator]"})),(Pe=function(){return{w:i,m:p}})()}function Te(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Te=function(t,n,e,r){function i(n,e){Te(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Te(t,n,e,r)}function Ee(t,n){this.v=t,this.k=n}function Le(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Ne(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ie(r.key),r)}}function Ge(t,n,e){return n&&Ne(t.prototype,n),e&&Ne(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ie(t){var n=function(t){if("object"!=ge(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=ge(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ge(n)?n:n+""}function Fe(t,n,e){Ce(t,n),n.set(t,e)}function Ce(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ae(t,n){return t.get(qe(t,n))}function De(t,n,e){return t.set(qe(t,n),e),e}function qe(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var Me=new WeakMap,Be=new WeakMap,We=new WeakSet;function ze(){Qn()?qe(We,this,He).call(this):Ae(Me,this).displayGuestMessage("Silakan <strong>Login</strong> untuk melihat daftar cerita dari pengguna lain.")}function He(){return Ue.apply(this,arguments)}function Ue(){var t;return t=ke().mark((function t(){var n;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ae(Be,this).fetchAllStories();case 3:n=t.sent,Ae(Me,this).displayStories(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Ae(Me,this).displayError(t.t0.message);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})),Ue=function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Le(i,r,o,a,u,"next",t)}function u(t){Le(i,r,o,a,u,"throw",t)}a(void 0)}))},Ue.apply(this,arguments)}const Re=Ge((function t(n){var e,r=n.view,o=n.api;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),Ce(this,e=We),e.add(this),Fe(this,Me,null),Fe(this,Be,null),De(Me,this,r),De(Be,this,o),qe(We,this,ze).call(this)}));function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function Ye(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return Ke(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Ke(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw i}}}}function Ke(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function Je(){var t=nr(),n=t.m(Je),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,$e(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Je=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new rr(t,n)},AsyncIterator:tr,async:function(t,n,e,o,a){return(r(n)?Ze:Xe)(i(t),n,e,o,a)},keys:Qe,values:$e}})()}function $e(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Ve(t)+" is not iterable")}function Qe(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Xe(t,n,e,r,o){var i=Ze(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Ze(t,n,e,r,o){return new tr(nr().w(t,n,e,r),o||Promise)}function tr(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof rr?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(er(tr.prototype),er(tr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),er(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function nr(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return er(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(er(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,er(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,er(l,"constructor",s),er(s,"constructor",c),c.displayName="GeneratorFunction",er(s,o,"GeneratorFunction"),er(l),er(l,o,"Generator"),er(l,r,(function(){return this})),er(l,"toString",(function(){return"[object Generator]"})),(nr=function(){return{w:i,m:p}})()}function er(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}er=function(t,n,e,r){function i(n,e){er(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},er(t,n,e,r)}function rr(t,n){this.v=t,this.k=n}function or(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ir(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){or(i,r,o,a,u,"next",t)}function u(t){or(i,r,o,a,u,"throw",t)}a(void 0)}))}}function ar(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ur(r.key),r)}}function ur(t){var n=function(t){if("object"!=Ve(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Ve(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ve(n)?n:n+""}function cr(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}function sr(t,n){return t.get(lr(t,n))}function fr(t,n,e){return t.set(lr(t,n),e),e}function lr(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var pr=new WeakMap,vr=new WeakMap,yr=new WeakMap,dr=function(){return t=function t(n){var e=n.navigationDrawer,r=n.drawerButton,o=n.content;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),cr(this,pr,null),cr(this,vr,null),cr(this,yr,null),fr(pr,this,o),fr(vr,this,r),fr(yr,this,e),this._initialAppShell()},r=[{key:"_initialAppShell",value:function(){this._setupDrawer(),this._setupSkipLink()}},{key:"_setupDrawer",value:function(){var t=this;sr(vr,this).addEventListener("click",(function(){sr(yr,t).classList.toggle("open")})),document.body.addEventListener("click",(function(n){sr(yr,t).contains(n.target)||sr(vr,t).contains(n.target)||sr(yr,t).classList.remove("open"),sr(yr,t).querySelectorAll("a").forEach((function(e){e.contains(n.target)&&sr(yr,t).classList.remove("open")}))}))}},{key:"_setupSkipLink",value:function(){var t=document.querySelector(".skip-to-content"),n=document.querySelector("#main-content");t&&n&&t.addEventListener("click",(function(t){t.preventDefault(),n.setAttribute("tabindex",-1),n.focus(),n.removeAttribute("tabindex")}))}},{key:"renderPage",value:(i=ir(Je().mark((function t(){var n=this;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(document.startViewTransition){t.next=4;break}return t.next=3,this._updateContent();case 3:return t.abrupt("return");case 4:document.startViewTransition(ir(Je().mark((function t(){return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateContent();case 2:case"end":return t.stop()}}),t)}))));case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"_updateContent",value:(o=ir(Je().mark((function t(){var r,o,i,a;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._updateNavigation(),r=e.parseActiveUrlWithCombiner(),(o=we[r]||we["/"])!==vt){t.next=11;break}return i=new vt,t.next=7,i.render();case 7:sr(pr,this).innerHTML=t.sent,new Re({view:i,api:n}),t.next=18;break;case 11:return a=new o,t.next=14,a.render();case 14:if(sr(pr,this).innerHTML=t.sent,!a.afterRender){t.next=18;break}return t.next=18,a.afterRender();case 18:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_updateNavigation",value:function(){var t=document.querySelector("#nav-list");if(t)if(Qn()){var n=Xn();t.innerHTML='\n        <li><a href="#/">Beranda</a></li>\n        <li><a href="#/add">Tambah Cerita</a></li>\n        <li><a href="#/favorite">Favorit</a></li>\n        <li><a href="#/about">About</a></li>\n        <li><a id="logout-button" href="#">Logout ('.concat(n,")</a></li>\n      ");var e=document.querySelector("#logout-button");e&&e.addEventListener("click",(function(t){t.preventDefault(),Zn(),alert("Anda berhasil logout."),window.location.hash="#/login",window.location.reload()}))}else t.innerHTML='\n        <li><a href="#/">Beranda</a></li>\n        <li><a href="#/about">About</a></li>\n        <li><a href="#/login">Login</a></li>\n      '}}],r&&ar(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,o,i}();function hr(t){for(var n=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),e=window.atob(n),r=new Uint8Array(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}function mr(){return br.apply(this,arguments)}function br(){return(br=ir(Je().mark((function t(){var n,e;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=document.getElementById("notification-toggle-button")){t.next=3;break}return t.abrupt("return");case 3:if(Qn()){t.next=6;break}return n.style.display="none",t.abrupt("return");case 6:return t.next=8,navigator.serviceWorker.ready;case 8:return e=t.sent,t.next=11,e.pushManager.getSubscription();case 11:t.sent?(n.textContent="Disable Notifications",n.classList.add("state-disable")):(n.textContent="Enable Notifications",n.classList.add("state-enable")),n.style.display="block",n.addEventListener("click",ir(Je().mark((function t(){var r,o,i,a,u;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.classList.contains("state-enable")){t.next=33;break}return t.next=3,Notification.requestPermission();case 3:if("granted"===t.sent){t.next=7;break}return alert("Anda harus mengizinkan notifikasi untuk mengaktifkannya."),t.abrupt("return");case 7:return t.prev=7,t.next=10,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hr("BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk")});case 10:return r=t.sent,delete(o=r.toJSON()).expirationTime,t.next=15,fetch("".concat(Et,"/notifications/subscribe"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(te())},body:JSON.stringify(o)});case 15:if((i=t.sent).ok){t.next=21;break}return t.next=19,i.json();case 19:throw a=t.sent,new Error(a.message||"Failed to send subscription to server.");case 21:console.log("Subscription sent to server."),n.textContent="Disable Notifications",n.classList.add("state-disable"),n.classList.remove("state-enable"),t.next=31;break;case 27:t.prev=27,t.t0=t.catch(7),console.error("Failed to subscribe or send subscription:",t.t0),alert("Gagal subscribe: ".concat(t.t0.message));case 31:t.next=51;break;case 33:return t.prev=33,t.next=36,e.pushManager.getSubscription();case 36:if(!(u=t.sent)){t.next=43;break}return t.next=40,fetch("".concat(Et,"/notifications/subscribe"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(te())},body:JSON.stringify({endpoint:u.endpoint})});case 40:return t.next=42,u.unsubscribe();case 42:console.log("Unsubscribed and subscription removed from server.");case 43:n.textContent="Enable Notifications",n.classList.add("state-enable"),n.classList.remove("state-disable"),t.next=51;break;case 48:t.prev=48,t.t1=t.catch(33),console.error("Failed to unsubscribe:",t.t1);case 51:case"end":return t.stop()}}),t,null,[[7,27],[33,48]])}))));case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function wr(){return(wr=ir(Je().mark((function t(){var n;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("serviceWorker"in navigator){t.next=3;break}return console.error("Service Worker API not supported."),t.abrupt("return");case 3:return t.prev=3,t.next=6,navigator.serviceWorker.register("./service-worker.js");case 6:n=t.sent,console.log("Service worker registration succeeded:",n),mr(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.error("Service worker registration failed:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}function gr(){return kr.apply(this,arguments)}function kr(){return(kr=ir(Je().mark((function t(){var n,e,r,o,i,a;return Je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Online! Mencoba mengirim data dari Outbox..."),t.next=3,R();case 3:if(0!==(n=t.sent).length){t.next=7;break}return console.log("Outbox kosong."),t.abrupt("return");case 7:e=Ye(n),t.prev=8,e.s();case 10:if((r=e.n()).done){t.next=33;break}return o=r.value,console.log("Mengirim cerita:",o.description),(i=new FormData).append("description",o.description),i.append("photo",o.photo),o.lat&&o.lon&&(i.append("lat",o.lat),i.append("lon",o.lon)),t.prev=17,t.next=20,Jt(i);case 20:if(!(a=t.sent).error){t.next=23;break}throw new Error(a.message);case 23:return t.next=25,V(o.id);case 25:console.log("Cerita (ID:",o.id,") berhasil dikirim dan dihapus dari outbox."),t.next=31;break;case 28:t.prev=28,t.t0=t.catch(17),console.error("Gagal mengirim cerita (ID:",o.id,"). Tetap di outbox.",t.t0.message);case 31:t.next=10;break;case 33:t.next=38;break;case 35:t.prev=35,t.t1=t.catch(8),e.e(t.t1);case 38:return t.prev=38,e.f(),t.finish(38);case 41:case"end":return t.stop()}}),t,null,[[8,35,38,41],[17,28]])})))).apply(this,arguments)}!function(){wr.apply(this,arguments)}(),window.addEventListener("online",(function(){gr()})),navigator.onLine&&gr();const xr=dr;function Sr(t){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sr(t)}function Or(){var t=Lr(),n=t.m(Or),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,jr(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Or=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Gr(t,n)},AsyncIterator:Er,async:function(t,n,e,o,a){return(r(n)?Tr:Pr)(i(t),n,e,o,a)},keys:_r,values:jr}})()}function jr(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Sr(t)+" is not iterable")}function _r(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Pr(t,n,e,r,o){var i=Tr(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Tr(t,n,e,r,o){return new Er(Lr().w(t,n,e,r),o||Promise)}function Er(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Gr?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Nr(Er.prototype),Nr(Er.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Nr(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Lr(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,s=Object.create(c.prototype);return Nr(s,"_invoke",function(e,r,o){var i,u,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function v(e,r){for(u=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],v=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=v&&((o=e<2&&v<i[1])?(u=0,p.v=r,p.n=i[1]):v<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,y),u=f,c=y;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(s=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{s=1}}return{value:n,done:l}}}(e,o,i),!0),s}var a={};function u(){}function c(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(Nr(n={},r,(function(){return this})),n),l=s.prototype=u.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Nr(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=s,Nr(l,"constructor",s),Nr(s,"constructor",c),c.displayName="GeneratorFunction",Nr(s,o,"GeneratorFunction"),Nr(l),Nr(l,o,"Generator"),Nr(l,r,(function(){return this})),Nr(l,"toString",(function(){return"[object Generator]"})),(Lr=function(){return{w:i,m:p}})()}function Nr(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Nr=function(t,n,e,r){function i(n,e){Nr(t,n,(function(t){return this._invoke(n,e,t)}))}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(i("next",0),i("throw",1),i("return",2))},Nr(t,n,e,r)}function Gr(t,n){this.v=t,this.k=n}function Ir(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Fr(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Ir(i,r,o,a,u,"next",t)}function u(t){Ir(i,r,o,a,u,"throw",t)}a(void 0)}))}}document.addEventListener("DOMContentLoaded",Fr(Or().mark((function t(){var n;return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new xr({content:document.querySelector("#main-content"),drawerButton:document.querySelector("#drawer-button"),navigationDrawer:document.querySelector("#navigation-drawer")}),t.next=3,n.renderPage();case 3:window.addEventListener("hashchange",Fr(Or().mark((function t(){return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.renderPage();case 2:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})))),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js").then((function(t){console.log("[SW] registered:",t),t.waiting&&console.log("[SW] waiting to activate..."),t.addEventListener("updatefound",(function(){console.log("[SW] Update found!");var n=t.installing;n.addEventListener("statechange",(function(){"installed"===n.state&&navigator.serviceWorker.controller&&console.log("[SW] New version ready, waiting to activate.")}))}))})).catch((function(t){return console.error("[SW] registration failed:",t)}))}))})();